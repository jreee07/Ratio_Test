<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Ratio Test Calculator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f3f6fa;
      margin: 0;
      padding: 20px;
    }
    .container {
      max-width: 800px;
      margin: auto;
      background: #fff;
      padding: 20px;
      border-radius: 16px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    h2 {
      text-align: center;
      margin-bottom: 20px;
    }
    .grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
    }
    label {
      font-weight: bold;
      margin-bottom: 5px;
      display: block;
    }
    input, select {
      padding: 8px;
      width: 100%;
      border: 1px solid #ccc;
      border-radius: 8px;
    }
    .result-box {
      background: #eef6ff;
      padding: 12px;
      margin-top: 15px;
      border-radius: 12px;
      font-size: 1.1em;
      text-align: center;
      font-weight: bold;
    }
    .comment {
      margin-top: 20px;
      padding: 15px;
      text-align: center;
      border-radius: 12px;
      font-size: 1.2em;
      font-weight: bold;
    }
    .ok {
      background: #e6ffed;
      color: #065f46;
      border: 2px solid #34d399;
    }
    .warn {
      background: #fff5f5;
      color: #991b1b;
      border: 2px solid #f87171;
    }
    button {
      margin-top: 20px;
      padding: 12px;
      width: 100%;
      border: none;
      background: #2563eb;
      color: white;
      font-size: 1em;
      border-radius: 8px;
      cursor: pointer;
    }
    button:hover {
      background: #1d4ed8;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>‚ö° Ratio Test Calculator ‚ö°</h2>

    <div class="grid">
      <div>
        <label>Select Transformer Type:</label>
        <select id="transformer">
          <option value="11000/110">11000/110</option>
          <option value="33000/110">33000/110</option>
          <option value="240/240">240/240 LT CT</option>
          <option value="Whole">Whole Current</option>
        </select>
      </div>

      <div>
        <label>Select Side:</label>
        <select id="side">
          <option value="LT">LT Side</option>
          <option value="HT">HT Side</option>
        </select>
      </div>
    </div>

    <div class="grid">
      <div>
        <label>Clamp Current I1:</label>
        <input type="number" id="i1">
      </div>
      <div>
        <label>Clamp Current I2:</label>
        <input type="number" id="i2">
      </div>
      <div>
        <label>Clamp Current I3:</label>
        <input type="number" id="i3">
      </div>
    </div>

    <div class="grid">
      <div>
        <label>Meter Current I1:</label>
        <input type="number" id="m1">
      </div>
      <div>
        <label>Meter Current I2:</label>
        <input type="number" id="m2">
      </div>
      <div>
        <label>Meter Current I3:</label>
        <input type="number" id="m3">
      </div>
    </div>

    <button onclick="calculate()">üîç Calculate</button>

    <div id="avgClamp" class="result-box"></div>
    <div id="avgMeter" class="result-box"></div>
    <div id="calcMeter" class="result-box"></div>
    <div id="diff" class="result-box"></div>
    <div id="comment" class="comment"></div>
  </div>

  <script>
    function calculate() {
      const transformer = document.getElementById("transformer").value;
      const side = document.getElementById("side").value;

      const i1 = parseFloat(document.getElementById("i1").value) || 0;
      const i2 = parseFloat(document.getElementById("i2").value) || 0;
      const i3 = parseFloat(document.getElementById("i3").value) || 0;

      const m1 = parseFloat(document.getElementById("m1").value) || 0;
      const m2 = parseFloat(document.getElementById("m2").value) || 0;
      const m3 = parseFloat(document.getElementById("m3").value) || 0;

      const avgClamp = (i1 + i2 + i3) / 3;
      const avgMeter = (m1 + m2 + m3) / 3;

      let calcMeter = 0;
      if (transformer === "11000/110" && side === "LT") {
        calcMeter = avgClamp / 26.5;
      } else if (transformer === "11000/110" && side === "HT") {
        calcMeter = avgClamp;
      } else if (transformer === "33000/110" && side === "LT") {
        calcMeter = avgClamp / 79.5;
      } else if (transformer === "33000/110" && side === "HT") {
        calcMeter = avgClamp;
      } else if (transformer === "240/240") {
        calcMeter = avgClamp;
      } else if (transformer === "Whole") {
        calcMeter = avgClamp;
      }

      const diff = calcMeter - avgMeter;

      document.getElementById("avgClamp").innerText = üìè Average Clamp Current: ${avgClamp.toFixed(3)};
      document.getElementById("avgMeter").innerText = ‚ö° Average Meter Current: ${avgMeter.toFixed(3)};
      document.getElementById("calcMeter").innerText = üßÆ Calculated Meter Current: ${calcMeter.toFixed(3)};
      document.getElementById("diff").innerText = üîÄ Difference: ${diff.toFixed(3)};

      const commentBox = document.getElementById("comment");
      if (diff >= -0.1 && diff <= 0.1) {
        commentBox.innerText = "‚úÖ ‡¶Ü‡¶≤‡¶π‡¶æ‡¶Æ‡¶¶‡ßÅ‡¶≤‡¶ø‡¶≤‡ßç‡¶≤‡¶æ‡¶π, ‡¶∏‡¶¨ ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶†‡¶ø‡¶ï ‡¶Ü‡¶õ‡ßá";
        commentBox.className = "comment ok";
      } else {
        commentBox.innerText = "‚ö†Ô∏è ‡¶ï‡¶æ‡¶Æ ‡¶∏‡¶æ‡¶∞‡¶õ‡ßá, ‡¶≠‡¶æ‡¶≤‡ßã ‡¶ï‡¶∞‡ßá ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡¶¨‡ßá";
        commentBox.className = "comment warn";
      }
    }
  </script>
</body>
</html>